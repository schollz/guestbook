<!DOCTYPE html>
<html>

<head>
  <title>Go JSONP Server</title>
  <!-- https://codepen.io/iPawan/pen/emrPKP -->
  <link rel="stylesheet" href="https://unpkg.com/tachyons/css/tachyons.min.css">
</head>

<body>



  <article class="pa3 pa5-ns">
    <h1 class="f3 f2-m f1-l">Guestbook</h1>

    <div class="black-80 measure-wide">
      <label for="name" class="f6 b db mb2">Name
      </label>
      <input id="name" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" aria-describedby="name-desc">
      <label for="email" class="f6 b db mb2">Email
        <span class="normal black-60">(optional)</span>
      </label>
      <input id="email" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" aria-describedby="name-desc">
      <label for="message" class="f6 b db mb2">Message
      </label>
      <textarea id="message" name="message" class="input-reset ba b--black-20 pa2 mb2 db w-100" aria-describedby="message-desc"></textarea>
      <div class="mt3">
        <input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6" type="button" id="btn" value="Submit">
      </div>
    </div>
<!-- 
    <article class="mw6-ns br3 hidden ba b--black-10 mv4">
        <h1 class="f4 bg-near-white br3 br--top black-60 mv0 pv2 ph3">Zack (United States, 2016-04-12)</h1>
        <div class="pa3 bt b--black-10">
          <p class="f6 f5-ns lh-copy measure">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
            tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At
            vero eos et accusam et justo duo dolores et ea rebum.
          </p>
        </div>
      </article> -->


    <div id="guestbook" class="measure-wide"></div>


  </article>

  <script>
    'use strict';
    var btn = document.getElementById("btn");
    var guestbook = document.getElementById("guestbook");

    function myCallback(acptlang) {
      if (acptlang.Message != "") {
        alert(acptlang.Message);
      }
      console.log(acptlang);
      guestbook.innerHTML = "";
      console.log(acptlang.Entries.length);
      for (var i = 0; i < acptlang.Entries.length; i++) {
        guestbook.innerHTML = guestbook.innerHTML + '<blockquote class="bluejeans" style="margin-top:50px;">' + acptlang.Entries[i].Message + '- <strong><span class="Cbluejeans">' + acptlang.Entries[i].Name + '</span></strong> from ' + acptlang.Entries[i].Location + ' on ' + acptlang.Entries[i].Date.split('T')[0] + '</blockquote>'

      }
    }

    function jsonp() {
      guestbook.innerHTML = "Loading ...";
      var tag = document.createElement("script");
      var message = encodeURIComponent(document.querySelector('#message').value);
      var name = encodeURIComponent(document.querySelector('#name').value);
      var email = encodeURIComponent(document.querySelector('#email').value);
      tag.src = "https://guestbook.schollz.com/jsonp?callback=myCallback&message=" + message + "&name=" + name + "&email=" + email;
      document.querySelector("head").appendChild(tag);
    }
    btn.addEventListener("click", jsonp);
    window.onload = jsonp;
  </script>



</body>


</html>